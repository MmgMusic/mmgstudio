/* Styles spécifiques pour les écrans jusqu'à 768px */

*,
*:before,
*:after {
    box-sizing: border-box;
}

:root {
    --mobile-font-size-base: clamp(10px, 3vw, 12px);
    --mobile-title-size: clamp(16px, 5vw, 22px);
    --mobile-spacing: clamp(8px, 2.5vw, 12px);
    /* NOUVEAU: Variable pour la hauteur du mini-lecteur (padding 9+9 + icône 24 + safe-area 10) */
    --mobile-nav-height: calc(52px + env(safe-area-inset-bottom, 0px));
    /* Hauteur de la barre de navigation */
}

/* NOUVEAU: Fix pour la hauteur du viewport sur mobile (barre d'adresse) */
body {
    height: 100vh;
    /* Fallback pour les anciens navigateurs */
    height: 100dvh;
    /* Hauteur dynamique qui s'adapte aux barres du navigateur */
    min-height: -webkit-fill-available;
    /* Fallback spécifique pour Safari iOS */
}

.main-grid-layout {
    display: flex;
    flex-direction: column;
    height: 100%;
    position: relative;
}

.main-area {
    grid-column: 1 / -1;
    /* Prend toute la largeur */
    display: flex;
    flex-direction: column;
    overflow: hidden;
    flex-grow: 1;
    transition: padding-bottom 0.3s ease-out;
}

.page-content {
    flex-grow: 1;
    overflow-y: auto;
    padding: 0 20px 100px 20px;
    /* General padding harmonisé avec testfinal.html */
}

/* NOUVEAU: Cache le titre principal des sections sur mobile (sauf pour l'accueil)
   car il est déjà affiché dans la barre du haut. */
/* CORRECTION: On ne cache plus le titre des résultats de recherche pour que l'utilisateur voie le contexte. */
.page-section:not(#home-section):not(#search-results-section)>.page-content>.section-title {
    display: none;
}

/* NOUVEAU: Cache les titres spécifiques dans les sections (boutique, bibliothèque, etc.)
   car ils sont aussi redondants avec le titre de la barre du haut. */
#shop-section .shop-title,
#library-section .library-content-title,
#videos-section .section-title {
    display: none;
}

/* NOUVEAU: Cache les titres des sous-sections de la bibliothèque (Titres likés, Playlists, etc.)
   car ils sont redondants avec les onglets. */
/* CORRECTION: Cible l'ID correct du titre généré par JavaScript dans la bibliothèque. */
#library-section-title {
    display: none;
}

/* CORRECTION: Fait en sorte que le lecteur vidéo prenne tout l'espace sur mobile */
#large-player-section {
    height: 100%;
    padding: 20px 10px 80px 10px;
    /* Plus d'espace pour ne pas couper les contrôles */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* NOUVEAU: Force l'iframe à 100% sur mobile pour éviter que les contrôles ne soient coupés */
#large-player-iframe {
    width: 100%;
    height: 100%;
}

/* NOUVEAU: Rend le bouton plein écran visible sur le lecteur vidéo mobile */
.player-container .fullscreen-btn {
    opacity: 0.8;
    /* CORRECTION: Centrage du bouton en bas pour ne pas gêner les contrôles YouTube */
    left: 50%;
    transform: translateX(-50%);
    right: auto;
    bottom: 15px;
}

/* NOUVEAU: Bouton pour quitter le plein écran sur mobile */
.player-container .exit-fullscreen-btn {
    position: absolute;
    bottom: 15px;
    /* CORRECTION: Position en bas */
    left: 15px;
    /* CORRECTION: Position à gauche */
    background-color: rgba(0, 0, 0, 0.6);
    color: white;
    border: none;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    font-size: 1.3rem;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2147483647;
    /* S'assurer qu'il est au-dessus de tout */
    opacity: 0;
    pointer-events: none;
    /* N'est pas cliquable quand il est invisible */
    transition: opacity 0.3s ease;
}

.player-container .exit-fullscreen-btn.visible {
    opacity: 0.8;
    pointer-events: auto;
    /* Devient cliquable */
}

.card__title {
    font-size: 0.85em;
}

.card__description {
    font-size: 0.75em;
}

/* NOUVEAU: Réduit la taille du texte de description des missions dans la boutique sur mobile */
.shop-item-description.mission-description {
    font-size: 0.55em;
    /* Légèrement réduit pour tenir sur 3 colonnes */
    /* CORRECTION: Taille légèrement augmentée pour la lisibilité, mais reste compacte */
    line-height: 1.4;
}

/* NOUVEAU: Réduit la taille du texte "Débloqué" dans la boutique sur mobile */
.shop-item-description {
    font-size: 0.6em;
}

/* NOUVEAU: Réduit la taille des titres et descriptions en mode grille sur mobile */
.titles-grid .card__title {
    font-size: 0.8em;
}

.titles-grid .card__description {
    font-size: 0.7em;
}

/* NOUVEAU: Réduit la taille du badge "Loop Me!" sur mobile */
.card__badge {
    font-size: 0.5em;
    padding: 0.2em 0.5em;
    top: 10px;
    left: 10px;
    right: auto;
}

/* NOUVEAU: Ajuste la taille du badge de prix sur mobile */
.card-price-badge {
    font-size: 0.9em;
    /* Assez grand pour être lisible au centre */
    padding: 6px 10px;
}

/* NOUVEAU: Supprime la marge au-dessus de la description pour les cartes en grille sur mobile. */
.titles-grid .card__description {
    margin-top: 0;
}

/* NOUVEAU: Réduit la taille du texte "morceaux à débloquer" sur mobile */
/* NOUVEAU: Empêche la sélection de texte sur les cartes lors d'un appui long */
.card {
    user-select: none;
    -webkit-user-select: none;
    /* Pour Safari */
}


/* CORRECTION: Applique la réduction de taille à TOUS les types de cartes avec ce texte */
.card.has-unlockable-text .card__description,
.card.locked .card__description {
    font-size: 0.65em;
    opacity: 0.9;
}

/* NOUVEAU: Remonte le bouton "trois points" sur les cartes en grille */
.titles-grid .card .card-actions {
    transform: translateY(-6px);
}


/* NOUVEAU: Désactive le feedback tactile bleu par défaut du navigateur */
* {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
}

/* NOUVEAU: Ajoute l'animation "pop" au clic sur mobile via CSS pour plus de fiabilité */
/* MODIFICATION: Amélioration du feedback tactile avec un effet moderne et élégant */
.clickable-icon:active,
button:active,
.top-bar-btn:active,
.mobile-nav-link:active,
.card:active,
.shop-product-card:active,
.shop-list-item:active,
.playlist-tab-btn:active {
    /* Animation de scale subtile */
    transform: scale(0.95);
    transition: transform 0.1s ease-out;
    /* Effet de brillance moderne */
    background-color: rgba(0, 0, 0, 0.05);
    border-radius: 12px;
}

/* NOUVEAU: Feedback tactile pour le thème sombre */
body.dark-theme .clickable-icon:active,
body.dark-theme button:active,
body.dark-theme .top-bar-btn:active,
body.dark-theme .mobile-nav-link:active,
body.dark-theme .card:active,
body.dark-theme .shop-product-card:active,
body.dark-theme .shop-list-item:active,
body.dark-theme .playlist-tab-btn:active {
    background-color: rgba(255, 255, 255, 0.08);
}

/* CORRECTION: Harmonise la taille du titre de la boutique avec les autres sections sur mobile */
.shop-title {
    font-size: 1.2em;
    margin-bottom: 10px;
}

/* NOUVEAU: Cache le titre "Boutique" sur mobile car il est déjà dans le header global */
#shop-section .shop-title {
    display: none;
}

/* NOUVEAU: Conteneur pour aligner compteur et code secret sur mobile */
.shop-top-container {
    display: flex;
    align-items: center;
    gap: 0;
    /* Fusion: pas d'espace */
    margin-bottom: 15px;
    width: 100%;
    /* Assure que le conteneur prend toute la largeur */
    /* NOUVEAU: Style de la gélule fusionnée */
    height: 42px;
    border-radius: 50px;
    background-color: rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

/* Ajustement du header pour qu'il ne prenne pas toute la largeur */
.shop-header {
    margin-bottom: 0;
    flex: 1;
    /* Prend 50% de l'espace */
    min-width: 0;
    /* Empêche le débordement */
    justify-content: center;
    /* Centre le compteur de pièces dans son espace */
    /* NOUVEAU: Séparateur vertical */
    position: relative;
}

.shop-header::after {
    content: '';
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 1px;
    height: 20px;
    background-color: rgba(0, 0, 0, 0.1);
}

/* Masquer le texte "Mes Pièces" sur mobile (mais pas le compteur) */
.shop-coin-counter>span {
    display: none;
}

/* NOUVEAU: Style "Gélule" pour le compteur de pièces */
.shop-coin-counter {
    /* Fusion: on retire le style individuel */
    height: 100%;
    background-color: transparent;
    border: none;
    width: 100%;
    justify-content: center;
    padding: 0 10px 0 20px;
    /* Ajuste le padding interne */
    box-sizing: border-box;
}

.shop-coin-counter p {
    font-size: 1.1em;
    font-weight: 800;
    /* Chiffre en gras */
    margin: 0;
    display: flex;
    align-items: center;
    gap: 6px;
}

.shop-coin-counter .coin-icon-svg {
    color: var(--icon-color);
    /* Couleur neutre */
    font-size: 1.3em;
}

/* NOUVEAU: Ajoute un espace sous la section des fonds d'écran dans la boutique sur mobile */
.shop-section:has(#backgrounds-container) {
    margin-bottom: 20px;
}

/* NOUVEAU: Réduit la taille des cartes de thèmes et de fonds d'écran dans la boutique sur mobile */
.shop-backgrounds-grid {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 8px;
    /* Espace réduit entre les cartes */
}

/* NOUVEAU: Réduit la taille de police des boîtes de dialogue sur mobile */
#big-dialog {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(30, 30, 30, 0.95);
    color: white;
    padding: 20px 30px;
    border-radius: 20px;
    z-index: 9999;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.2);
    text-align: center;
    font-size: 0.9em;
    font-weight: 700;
    opacity: 1;
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
    max-width: 85%;
}

#big-dialog.hidden {
    display: none;
}

#big-dialog.fade-out {
    opacity: 0;
}

/* CORRECTION: Force l'affichage en colonne pour placer la recherche sous le header */
.top-bar {
    display: flex;
    flex-direction: column;
}

.top-bar-left {
    order: 2;
    width: 100%;
}

/* CORRECTION: Force l'affichage en colonne pour placer la recherche sous le header */
.top-bar {
    display: flex;
    flex-direction: column;
}

.top-bar-left {
    order: 2;
    width: 100%;
}

/* NOUVEAU: Styles pour le header mobile */
.mobile-header-icons {
    display: grid;
    /* MODIFICATION: Utilisation de grid pour un centrage parfait */
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    padding: 4px 8px;
    box-sizing: border-box;
    position: relative;
    /* Gardé pour d'autres éléments si besoin */
    width: 100%;
    /* NOUVEAU: Hauteur fixe pour stabiliser l'alignement vertical */
    height: 54px;
    order: 1;
    /* Affiche le header en premier */
    z-index: 10;
    /* Au-dessus de la recherche mais sous les panneaux */
    background-color: var(--ui-bar-bg);
    /* Fond opaque */
}

/* NOUVEAU: Style pour le logo MMGEAR */
#mobile-header-logo-container {
    /* MODIFICATION: Le conteneur n'est plus en position absolue */
    flex-grow: 1;
    /* Permet au conteneur de prendre l'espace central */
    text-align: center;
    /* Centre le contenu (logo ou titre) */
    /* MODIFICATION: Taille du logo réduite pour un look plus épuré */
    min-width: 0;
    /* Empêche le débordement sur les petits écrans */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* NOUVEAU: Style pour le titre de section dans le header mobile */
#mobile-header-title {
    font-size: 1.2em;
    font-weight: 700;
    line-height: 1;
    /* NOUVEAU: Empêche les variations de hauteur de ligne */
    color: var(--text-color);
    margin: 0;
    white-space: nowrap;
}

/* NOUVEAU: Logique pour afficher soit le logo, soit le titre */
#mobile-header-logo-container.show-logo #mobile-header-svg-logo {
    display: block;
}

#mobile-header-logo-container.show-title #mobile-header-title {
    display: block;
}

/* CORRECTION: Cache le titre quand on doit montrer le logo */
#mobile-header-logo-container.show-logo #mobile-header-title {
    display: none;
}

/* CORRECTION: Cache le logo quand on doit montrer le titre */
#mobile-header-logo-container.show-title #mobile-header-svg-logo {
    display: none;
}


.animated-logo-header {
    height: 15px;
    /* MODIFICATION: Hauteur fixe pour contrôler la taille du logo */
    width: auto;
}

.animated-logo-header path {
    fill: url(#movingGradientHeader);
    /* Utilise le dégradé défini dans le SVG */
    stroke: none !important;
    font-weight: 700;
}

/* CORRECTION: Assure que les icônes de droite s'alignent bien en ligne */
.mobile-header-right-icons {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    /* NOUVEAU: Largeur fixe pour équilibrer avec le côté gauche */
    min-width: 90px;
    /* Aligne les icônes à droite */
    gap: 8px;
    /* Ajoute un petit espace entre les icônes */
    justify-self: end;
    /* Aligne le conteneur à la fin de la cellule de la grille */
}

.search-bar {
    /* MODIFICATION: Application du style de la version ordinateur */
    display: flex;
    align-items: center;
    gap: 15px;
    /* CORRECTION: Utilise la variable spécifique pour la barre de recherche */
    background-color: var(--search-bar-bg);
    padding: 4px 15px;
    border-radius: 9999px;
    /* CORRECTION: Forme de pilule parfaite */
    box-sizing: border-box;
    /* Assure que le padding est inclus dans la largeur */
    width: calc(100% - 16px);
    margin: 0 8px;
    /* CORRECTION: Marge verticale supprimée par défaut pour éviter l'espace vide */
    /* NOUVEAU: Animation de glissement */
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    overflow: hidden;
    transition: max-height 0.4s ease-out, padding 0.4s ease-out;
}

.search-bar.visible {
    max-height: 100px;
    /* Hauteur suffisante pour s'afficher */
    padding: 4px 15px;
    margin: 8px;
    /* CORRECTION: Marge verticale ajoutée quand visible */
}

/* CORRECTION: Supprime la bordure moche de l'input */
.search-bar input {
    border: none;
    outline: none;
    background: none;
    flex-grow: 1;
    /* CORRECTION: Permet à l'input de prendre tout l'espace disponible */
    color: var(--text-color);
    /* NOUVEAU: Force la couleur du texte pour correspondre au thème */
}

/* NOUVEAU: Style du placeholder sur mobile pour correspondre au PC */
.search-bar input::placeholder {
    color: var(--text-color);
    opacity: 0.7;
}

/* NOUVEAU: Cache les nouveaux paramètres sur ordinateur */
.mobile-only-setting {
    display: flex;
    /* Visible par défaut (sur mobile) */
}

/* NOUVEAU: Ajuste la taille du badge sur mobile */
.filter-count-badge {
    width: 16px;
    height: 16px;
    font-size: 10px;
}

.top-bar-btn {
    width: clamp(35px, 9vw, 45px);
    height: clamp(35px, 9vw, 45px);
    font-size: clamp(1rem, 4vw, 1.3rem);
    flex-shrink: 0;
    background: transparent !important;
    box-shadow: none !important;
}

/* NOUVEAU: Style spécifique pour l'icône tag dans la barre de recherche (transparent) */
.search-bar .top-bar-btn {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    width: 24px !important;
    height: 24px !important;
    padding: 0;
}

/* CORRECTION: Ajout de la position relative pour permettre au point de notification de s'afficher correctement. */
#mobile-notifications-btn {
    position: relative;
    justify-self: start;
    /* Aligne l'icône au début de la cellule de la grille */
    /* z-index retiré pour éviter les conflits de contexte d'empilement */
}

/* NOUVEAU: Conteneur pour les icônes de gauche du header mobile */
.mobile-header-left-icons {
    display: flex;
    align-items: center;
    gap: 8px;
    justify-self: start;
    /* Aligne le conteneur à gauche de la grille */
}

/* NOUVEAU: Positionnement du bouton de recherche pour le point indicateur */
#mobile-search-btn {
    position: relative;
}

/* NOUVEAU: Style du point indicateur de filtre sur la loupe */
.filter-dot-on-search {
    position: absolute;
    top: 8px;
    /* CORRECTION: Remonte légèrement le point */
    right: 8px;
    /* CORRECTION: Décale légèrement le point vers la droite */
    width: 8px;
    /* CORRECTION: Taille réduite pour plus de subtilité */
    height: 8px;
    background-color: var(--active-color);
    border-radius: 50%;
    border: 1.5px solid var(--ui-bar-bg);
    /* CORRECTION: Bordure légèrement plus épaisse pour mieux se détacher */
}

.search-bar input {
    font-size: 1rem;
}

.profile-switch {
    display: flex;
    margin: 15px 40px 15px 40px;
    order: 3;
    width: auto;
}

.profile-switch-btn {
    padding: 6px 10px;
    /* Padding vertical réduit */
    display: flex;
    align-items: center;
    justify-content: center;
    /* Centre le contenu */
    gap: 6px;
    font-size: 0.85rem;
    /* Taille de police réduite */
    font-weight: 600;
    transition: all 0.2s ease;
    background: none;
    border: none;
    color: var(--text-color);
    flex-grow: 1;
    /* Chaque bouton prend 50% de la largeur */
    border-bottom: none;
    /* CORRECTION: La bordure est maintenant gérée par le pseudo-élément */
}

/* NOUVEAU: Harmonise la taille du texte des onglets (Bibliothèque, Vidéos) avec le switch de profil */
.playlist-tab-btn {
    font-size: 0.85rem;
    border-bottom: none;
    /* CORRECTION: On retire la bordure par défaut pour laisser place à la barre glissante */
}

/* NOUVEAU: Supprime l'effet de "pop" et d'arrondi pour tous les onglets utilisant le slider */
.profile-switch-btn:active,
.playlist-tab-btn:active {
    transform: none;
    background-color: transparent;
    border-radius: 0;
}

body.dark-theme .profile-switch-btn:active,
body.dark-theme .playlist-tab-btn:active {
    background-color: transparent;
}

/* NOUVEAU: Style générique pour l'indicateur de glissement des onglets */
.profile-switch {
    position: relative;
    border-bottom: 1px solid var(--ui-bar-border);
}

/* NOUVEAU: Assure que les onglets glissants sont bien positionnés */
.sliding-tabs {
    position: relative;
}

/* NOUVEAU: Le pseudo-élément est appliqué à tous les conteneurs d'onglets */
.profile-switch::after,
.sliding-tabs::after {
    content: '';
    position: absolute;
    bottom: -1px;
    /* Se positionne sur la bordure inférieure */
    height: 2px;
    background-color: var(--active-color);
    left: var(--indicator-left, 0);
    width: var(--indicator-width, 0);
    transition: left 0.3s cubic-bezier(0.35, 0, 0.25, 1), width 0.3s cubic-bezier(0.35, 0, 0.25, 1);
}

.profile-switch-btn.active {
    color: var(--active-color);
}


/* NOUVEAU: Rétablit une taille de colonne plus petite pour les grilles de titres sur mobile */
.content-sections-card.titles-grid,
#videos-cards.titles-grid,
#bonus-cards.titles-grid {
    /* CORRECTION : La largeur minimale est réduite à 105px pour permettre 3 colonnes sur la plupart des mobiles,
       en tenant compte du padding et de l'espace entre les cartes.
       Cela assure la cohérence entre la bibliothèque (qui a un peu moins d'espace à cause des onglets) et les autres sections. */
    grid-template-columns: repeat(auto-fill, minmax(105px, 1fr));
    gap: 10px;
    /* Gap réduit pour 3 colonnes */
    /* Un espacement un peu plus grand pour la grille de titres */
}

/* NOUVEAU: Règle spécifique pour la bibliothèque sur mobile pour garantir 2 colonnes */
#library-container.titles-grid {
    grid-template-columns: repeat(auto-fill, minmax(105px, 1fr));
    gap: 10px;
}

@media (orientation: landscape) and (max-height: 500px) {
    .top-bar {
        padding: 2px 8px;
    }
}

/* === NOUVEAU MODE LISTE (MOBILE) === */
.content-sections-card.list-view .card,
.list-view-header {
    /* Colonnes pour mobile: #, Image, Titre, Menu */
    /* CORRECTION: Colonne de l'image et espacement réduits */
    grid-template-columns: 20px 40px 1fr 40px;
    /* #, Img, Titre, Menu */
    gap: 0.5rem;
    /* 8px */
    padding: 0.5rem 0;
    /* NOUVEAU: Ajout d'un padding vertical pour aérer les lignes */
}

/* NOUVEAU: Masque les colonnes Artiste et Tags sur mobile */
.list-view-artist-col,
.list-view-tags-col {
    display: none;
}

/* NOUVEAU: Cache l'en-tête de la liste sur mobile car il n'est pas nécessaire */
.list-view-header {
    display: none;
}

/* NOUVEAU: Styles pour permettre le défilement du titre en mode liste mobile */
.content-sections-card.list-view .card .list-view-title {
    overflow: hidden;
    /* Cache le texte qui dépasse */
    white-space: nowrap;
    /* Empêche le retour à la ligne */
}

/* NOUVEAU: Réduit l'importance visuelle du numéro de piste pour une meilleure hiérarchie */
.content-sections-card.list-view .card .list-view-index {
    font-size: 0.75rem;
    /* Plus petit */
    opacity: 0.6;
    /* Plus clair */
}

/* NOUVEAU: Réduit la taille du texte pour le mode liste sur mobile */
.content-sections-card.list-view .card .text-sm,
/* Cible les titres principaux */
.content-sections-card.list-view .card .text-base,
.content-sections-card.list-view .card .list-view-title {
    /* Cible aussi le conteneur pour plus de robustesse */
    font-size: 0.9rem;
    /* ~13.6px - Taille réduite pour un affichage plus compact */
}

/* NOUVEAU: Réduit la taille pour l'artiste, les tags et les icônes en mode liste */
.content-sections-card.list-view .card .text-xs {
    font-size: 0.7rem;
    /* ~11px */
}

.content-sections-card.list-view .card .like-btn-card,
.content-sections-card.list-view .card .add-playlist-btn-card,
.content-sections-card.list-view .card .card-menu-btn {
    font-size: 1rem !important;
    /* Taille adaptée pour le tactile */
}

/* CORRECTION: Supprime la ligne grise/bordure sur Android pour la barre de recherche */
.search-bar,
.search-bar input {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
}

/* === NOUVEAU TABLEAU DE BORD (MOBILE) === */
.dashboard-grid {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* --- HERO SECTION (Carrousel + Widgets) --- */

.carousel-card {
    /* aspect-ratio: 16/10; REMOVED: On veut de la hauteur */
    height: 220px;
    /* Hauteur réduite pour mobile */
    min-height: 0;
    border-radius: 32px;
    /* Arrondi plus prononcé */
    box-shadow: none;
    border: none !important;
    /* CORRECTION: Supprime le contour blanc hérité */
    padding: 0 !important;
    /* CORRECTION: Supprime le padding hérité qui crée l'espace pour le contour */
    transform: translateZ(0);
    /* CORRECTION: Force le navigateur à gérer les calques correctement (bug d'affichage mobile) */
}

.hero-side-column {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    height: auto;
}

/* Widgets (Bonus & Upcoming) */
#daily-bonus-section.daily-bonus-card,
.upcoming-release-card {
    flex: none;
    /* Reset flex if any */
    height: 100%;
    min-height: 130px;
    /* Hauteur réduite */
    padding: 0.75rem;
}


/* --- SPLIT ROW (Playlists & News) --- */
.dashboard-split-row {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.dashboard-half-column {
    width: 100%;
    gap: 15px;
}

/* Playlists Recommandées (Grille 2 colonnes) */
#playlist-reco-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    height: auto;
    overflow-y: visible;
    padding: 0;
}

/* --- TITRES DE SECTION HARMONISÉS --- */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 24px 0 12px 5px;
}

.section-title {
    font-size: 0.75rem;
    font-weight: 800;
    color: #94a3b8;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

/* Suppression du style spécifique pour que ça utilise le .section-title par défaut du site */

.view-all {
    font-size: 0.70rem;
    font-weight: 700;
    color: var(--active-color);
    cursor: pointer;
    opacity: 0.8;
}

/* --- BLOCS UI --- */
.ui-block {
    background: var(--ui-bar-bg);
    border-radius: 24px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03);
    width: 100%;
    border: 1px solid var(--ui-bar-border);
    overflow: hidden;
}

/* --- NEWS (Scroll) --- */
.news-scroll {
    display: flex;
    overflow-x: auto;
    gap: 12px;
    padding: 5px 0 15px 0;
    scrollbar-width: none;
    -webkit-overflow-scrolling: touch;
}

.news-scroll::-webkit-scrollbar {
    display: none;
}

.news-scroll .news-item {
    min-width: 200px;
    background: #ffffff !important;
    /* Comme dans testfinal.html */
    border-radius: 20px;
    overflow: hidden;
    border: 1px solid rgba(0, 0, 0, 0.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
    display: block;
    /* Force l'affichage en bloc pour avoir l'image au-dessus */
    cursor: pointer;
    transition: transform 0.2s;
    flex-shrink: 0;
    padding: 0;
}

body.dark-theme .news-scroll .news-item {
    background: var(--ui-bar-bg) !important;
    border-color: var(--ui-bar-border);
}

.news-scroll .news-item:active {
    transform: scale(0.97);
}

.news-img {
    height: 90px;
    width: 100%;
    /* Prend toute la largeur de la carte */
    background-color: var(--icon-hover-bg);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-color);
    opacity: 0.8;
    font-weight: 800;
    font-size: 0.7rem;
    background-size: cover;
    background-position: center;
    border-radius: 0;
}

.news-body {
    padding: 12px;
}

.news-headline {
    font-size: 0.8rem;
    font-weight: 700;
    margin: 0;
    color: var(--text-color);
    line-height: 1.4;
}

/* --- GUIDES (Simplifié) --- */
.guide-list {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.guide-row {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 15px;
    border-radius: 16px;
    border: 1px solid rgba(0, 0, 0, 0.05);
    transition: 0.2s;
    height: 100%;
    text-align: center;
    color: var(--text-color);
    position: relative;
    overflow: hidden;
    background: #ffffff;
    box-shadow: none;
}

body.dark-theme .guide-row {
    background: var(--card-bg);
    border-color: var(--card-border);
}

.guide-row:active {
    transform: scale(0.97);
    background: rgba(0, 0, 0, 0.05);
}

.guide-label {
    font-size: 0.85rem;
    font-weight: 800;
    color: var(--text-color);
    text-shadow: none;
}

.guide-icon-main {
    font-size: 2rem;
    margin-bottom: 5px;
    color: var(--active-color);
    filter: none;
}

/* NOUVEAU: Adaptation des cartes reco pour mobile */
.reco-card {
    flex-direction: column;
    gap: 10px;
    padding: 12px;
    height: auto;
}


/* NOUVEAU: Styles pour la section des guides sur le dashboard mobile */
.dashboard-guide-section {
    display: flex;
    /* S'affiche par défaut sur mobile, sera caché sur PC */
    flex-direction: column;
    gap: 10px;
}

/* NOUVEAU: Conteneur pour les boutons du guide sur le dashboard */
#dashboard-guide-buttons {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* CORRECTION: Harmonise la taille du texte des boutons du guide */
.guide-choice-btn {
    font-size: 0.9em;
    padding: 12px;
}

/* NOUVEAU: Assure que la section "À propos" prend toute la largeur sur mobile */
.dashboard-about-section {
    grid-column: 1 / -1;
    /* NOUVEAU: Ajoute un espace blanc en dessous de la carte "À propos" sur mobile */
    margin-bottom: 20px;
}

/* NOUVEAU: Réduit la taille du bouton de récupération du bonus sur mobile */
.claim-bonus-button {
    padding: 8px 16px;
    font-size: 0.9em;
    gap: 6px;
}

/* NOUVEAU: Adaptation de la section "À propos" (Template) pour mobile */
.about-card-template {
    background-color: #ffffff;
    /* Style PC */
    border: 1px solid #f3f4f6;
    /* Style PC */
    border-radius: 32px;
    /* Style PC */
    display: flex;
    flex-direction: column;
    padding: 2rem 1.5rem;
    gap: 1.5rem;
    text-align: center;
    align-items: center;
    position: relative;
    overflow: hidden;
}

body.dark-theme .about-card-template {
    background-color: var(--card-bg);
    border-color: var(--card-border);
}

.about-card-image-container {
    width: 140px;
    height: 140px;
    border-radius: 2.5rem;
    flex-shrink: 0;
    box-shadow: 0 15px 30px -8px rgba(0, 0, 0, 0.25);
    /* Style PC */
    border: 4px solid white;
    /* Style PC */
    transform: rotate(3deg);
    /* Style PC */
    transition: transform 0.5s;
    position: relative;
    z-index: 10;
    overflow: hidden;
    margin: 0 auto;
}

/* NOUVEAU: Assure que l'image remplit bien le conteneur arrondi */
.about-card-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.about-card-title {
    font-size: 1.5rem;
    font-weight: 900;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
    color: var(--text-color);
}

.about-card-description {
    color: var(--text-color);
    opacity: 0.7;
    text-align: justify;
    font-size: 0.9rem;
    line-height: 1.5;
    font-weight: 500;
    margin: 0;
}

.about-card-socials {
    justify-content: center;
}

/* NOUVEAU: Style des boutons réseaux sociaux (Section À propos) sur mobile */
.social-btn-small {
    width: 42px;
    /* Taille confortable pour le tactile */
    height: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    background: white;
    border: 1px solid #f1f3f5;
    color: #6b7280;
    transition: all 0.2s;
    text-decoration: none;
    font-size: 1.1rem;
}

body.dark-theme .social-btn-small {
    background-color: var(--ui-bar-bg);
    border-color: var(--card-border);
    color: var(--text-color);
}

/* === NOUVEAU: Adaptation du Carrousel Hero pour Mobile === */
.carousel-container {
    border-radius: 24px;
    height: 100%;
}

.hero-content {
    position: absolute;
    inset: 0;
    padding: 1.25rem;
    /* Padding réduit pour un look plus compact */
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: flex-start;
    z-index: 10;
}

.hero-title {
    font-size: 1.6rem;
    /* Taille réduite pour mobile */
    font-weight: 900;
    color: white;
    /* Manquait sur mobile */
    text-transform: uppercase;
    letter-spacing: -0.025em;
    line-height: 0.9;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    margin-bottom: 0.8rem;
    /* Moins d'espace avant le bouton */
    width: 100%;
}

.hero-description {
    display: none;
}

.hero-button {
    background-color: white;
    /* Style PC */
    color: black;
    padding: 0.6rem 1.2rem;
    border-radius: 1rem;
    font-weight: 900;
    font-size: 12px;
    text-transform: uppercase;
    border: none;
    cursor: url('../assets/cursors/link.cur'), pointer;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    width: auto;
    /* Pas 100% pour garder le style bouton */
    min-width: 100px;
}

.carousel-dots {
    position: absolute;
    /* CORRECTION: Position absolue pour superposer sur l'image comme sur PC */
    bottom: 1.25rem;
    /* Positionnement ajusté */
    right: 2rem;
    left: auto;
    transform: none;
    margin: 0;
    z-index: 20;
}

.carousel-dots button {
    background-color: rgba(255, 255, 255, 0.3);
    width: 8px;
    height: 8px;
    border-radius: 50%;
    border: none;
    transition: all 0.3s;
}

.carousel-dots button.active {
    background-color: white;
    width: 24px;
    border-radius: 4px;
}

/* === STYLES MANQUANTS POUR LES NOUVEAUX COMPOSANTS (Importés du PC) === */

/* Hero Background & Overlay */
.hero-bg {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
}

.hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.2), transparent);
}

.hero-badge {
    background-color: var(--active-color);
    color: white;
    font-size: 0.6rem;
    font-weight: 900;
    text-transform: uppercase;
    padding: 4px 10px;
    border-radius: 9999px;
    letter-spacing: 0.1em;
    margin-bottom: 0.5rem;
    display: inline-block;
}

/* Daily Bonus Card */

.daily-bonus-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 0.5rem;
}

.daily-bonus-reward-box {
    background-color: #f3f4f6;
    border-radius: 8px;
    padding: 4px 8px;
    display: flex;
    align-items: center;
    gap: 4px;
    font-weight: 900;
    font-size: 0.9rem;
    color: var(--text-color);
}

.daily-bonus-reward-box i {
    color: #fbbf24;
}

.daily-bonus-title {
    font-size: 0.8rem;
    /* Encore réduit */
    font-weight: 900;
    text-transform: uppercase;
    line-height: 1.2;
    margin-bottom: 0.1rem;
    color: var(--text-color);
}

.daily-bonus-subtitle {
    color: var(--active-color);
    font-size: 0.6rem;
    /* Encore réduit */
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.daily-bonus-content {
    margin-top: auto;
}

.daily-bonus-info {
    font-size: 0.65rem;
    margin: 0 0 6px 0;
    opacity: 0.9;
}

.daily-bonus-pills {
    display: flex;
    gap: 4px;
    margin-bottom: 1rem;
    margin-top: auto;
    /* Pousse vers le bas */
    padding-top: 1rem;
}

.reward-pill {
    flex: 1;
    height: 4px;
    border-radius: 2px;
    background: #f3f4f6;
}

.reward-pill.active {
    background: #fbbf24;
}

.reward-pill.completed {
    background: #fbbf24;
    opacity: 0.5;
}

.daily-bonus-action-btn {
    width: 100%;
    padding: 6px 0;
    /* Encore réduit */
    background-color: var(--active-color);
    color: white;
    border-radius: 12px;
    font-size: 0.65rem;
    /* Encore réduit */
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border: none;
    cursor: url('../assets/cursors/link.cur'), pointer;
    box-shadow: none;
}

.daily-bonus-action-btn:disabled {
    opacity: 0.6;
    cursor: default;
    background-color: #f3f4f6;
    color: var(--text-color);
}

/* Upcoming Release Card */
.upcoming-release-card {
    background-color: #09090b;
    background-size: cover;
    background-position: center;
    border-radius: 24px;
    padding: 1rem;
    border: 1px solid #27272a;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    position: relative;
    overflow: hidden;
    min-height: 140px;
}

.upcoming-release-card::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.8));
    z-index: 1;
}

.upcoming-release-card>* {
    position: relative;
    z-index: 2;
}

.upcoming-badge {
    font-size: 0.6rem;
    font-weight: 900;
    color: #facc15;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    background-color: rgba(250, 204, 21, 0.1);
    padding: 4px 10px;
    border-radius: 9999px;
    display: inline-block;
    margin-bottom: 0.8rem;
}

.upcoming-title {
    color: white;
    font-weight: 900;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: -0.025em;
    line-height: 1.1;
    margin: 0;
}

.upcoming-label {
    font-size: 0.6rem;
    color: #9ca3af;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin: 0 0 4px 0;
}

.upcoming-date {
    color: white;
    font-size: 0.7rem;
    font-weight: 900;
    text-transform: uppercase;
    margin: 0;
}

/* News Card */
.news-card-container {
    background-color: var(--card-style-bg);
    border: 1px solid var(--card-border);
    border-radius: 24px;
    padding: 20px;
    height: 220px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    box-shadow: none;
}

.news-card-container .news-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 0;
    border-bottom: 1px solid var(--ui-bar-border);
}

.news-card-container .news-item:last-child {
    border-bottom: none;
}

.news-icon-box {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    background-color: #e0e7ff;
    color: #6366f1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 12px;
}

.news-icon-box.yellow {
    background-color: #fef9c3;
    color: #ca8a04;
}

.news-content {
    flex: 1;
    min-width: 0;
}

.news-date {
    font-size: 0.6rem;
    font-weight: 800;
    text-transform: uppercase;
    color: var(--text-muted);
    letter-spacing: 0.05em;
    display: block;
    margin-bottom: 2px;
}

.news-title {
    font-size: 0.8rem;
    font-weight: 800;
    text-transform: uppercase;
    margin: 0 0 2px 0;
    color: var(--text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.news-excerpt {
    font-size: 0.7rem;
    color: var(--text-muted);
    font-weight: 600;
    margin: 0;
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* On cache les anciens styles qui pourraient interférer */
.carousel-item.hero-carousel-item {
    position: relative;
    /* Contient les éléments absolus */
    height: 100%;
    width: 100%;
    overflow: hidden;
    padding: 0;
    margin: 0;
    display: block;
    border-radius: 24px;
}


#music-title-details-section .music-details-grid {
    grid-template-columns: 1fr;
    height: auto;
    gap: 0;
    /* Gap removed as requested */
    padding-bottom: 40px;
    /* AJOUT: Padding augmenté pour éviter que le contenu ne soit coupé */
}

#music-title-details-section .music-details-container {
    flex-direction: column;
    align-items: center;
    gap: 13px;
    /* Gap removed as requested */
    padding-top: 40px;
}

/* Ajoute un espacement entre la pochette et les infos */
/* MODIFICATION: Centrage du panneau des vidéos associées et de son contenu texte */
#music-title-details-section .associated-videos-panel {
    justify-self: center;
    margin: 0;
    /* Margin removed as requested */
    text-align: center;
    max-width: 100%;
    width: 100%;
    /* Ensure full width for alignment */
}

/* NOUVEAU: Conteneur flex pour afficher les vidéos sur la même ligne */
#associated-videos-container {
    display: flex;
    flex-direction: row;
    gap: 15px;
    justify-content: center;
    /* Centered as requested */
    /* Alignement à gauche comme les titres */
    overflow-x: auto;
    /* Permet le défilement si ça dépasse */
    padding-bottom: 0;
    /* Reduced padding to minimize gap */
    margin-top: 0;
    /* Ensure no top margin */
}

/* NOUVEAU: Style des cartes vidéo pour image en haut et texte en dessous */
.associated-video-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 140px;
    /* Largeur fixe pour uniformité */
    flex-shrink: 0;
}

.associated-video-card img {
    width: 100%;
    height: auto;
    border-radius: 8px;
    aspect-ratio: 16/9;
    object-fit: cover;
    margin-bottom: 5px;
}

.associated-video-card p {
    font-size: 0.85em;
    margin: 0;
    text-align: center;
    color: var(--text-color);
}

/* Assure qu'il ne déborde pas sur les très petits écrans */
#details-album-art {
    width: 100%;
    height: auto;
    max-width: 300px;
}

.music-info-panel {
    width: 100%;
    text-align: left;
    /* Alignement à gauche pour tout le panneau */
}

/* MODIFICATION: Positionnement du bouton d'options en haut à droite de la page sur mobile */
#details-options-btn {
    position: absolute;
    top: 10px;
    left: auto;
    right: 15px;
    z-index: 10;
}

/* NOUVEAU: Alignement à gauche des titres de section sur la page de détails */
.music-info-panel h3 {
    text-align: left;
    width: 100%;
    padding-left: 0;
    font-size: 1.1em;
    margin-bottom: 5px;
}

.associated-videos-panel h3 {
    text-align: left;
    width: 100%;
    padding-left: 0;
    font-size: 1.1em;
    margin-bottom: 0;
    /* Gap removed completely */
}

/* NOUVEAU: Ajustement de la taille du titre principal */
.music-info-panel h2 {
    font-size: 1.3em;
    margin: 0;
    text-align: center;
    /* Centrage du titre demandé */
    width: 100%;
    margin-bottom: 0;
}

/* NOUVEAU: Wrapper pour le titre et les flèches */
.details-title-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    gap: 15px;
    margin-bottom: 15px;
}

.details-nav-arrow {
    font-size: 1.2em;
    color: var(--text-color);
    opacity: 0.5;
    padding: 10px;
    cursor: pointer;
    transition: opacity 0.2s;
}

.details-nav-arrow:hover {
    opacity: 1;
}

/* NOUVEAU: Ajustement de la taille du texte de description (ex: sous "Inspirations") */
.music-info-panel p {
    font-size: 0.9em;
    /* Taille de police harmonisée */
    line-height: 1.4;
}

.music-info-panel p strong {
    display: inline;
    /* Affichage en ligne pour aligner avec la valeur */
    margin-bottom: 0;
    margin-right: 5px;
    /* Petit espace après le label */
}

/* NOUVEAU: Centre les puces de l'album et de l'année sur mobile */
.details-meta-container {
    display: flex;
    flex-direction: column;
    /* MODIFIÉ: Affiche les éléments en colonne */
    align-items: center;
    /* MODIFIÉ: Centre les éléments horizontalement */
    gap: 15px;
    /* MODIFIÉ: Augmentation de l'espacement vertical */
    margin-bottom: 15px;
}

.streaming-links-container {
    justify-content: flex-start;
    /* Alignement à gauche comme le reste */
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

/* AJOUT : Style "carré arrondi" pour les liens de streaming */
.streaming-links-container a {
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 45px;
    height: 45px;
    background-color: rgba(255, 255, 255, 0.1);
    /* Fond subtil style glassmorphism */
    text-decoration: none;
    /* NOUVEAU: Supprime le soulignement gênant */
    border-radius: 12px;
    /* Bords arrondis */
    color: var(--text-color);
    transition: transform 0.2s ease, background-color 0.2s ease;
}

.streaming-links-container a:active {
    transform: scale(0.95);
    background-color: rgba(255, 255, 255, 0.2);
}

/* Adaptation pour le thème clair si nécessaire */
body:not(.dark-theme) .streaming-links-container a {
    background-color: rgba(0, 0, 0, 0.05);
}

/* CORRECTION: Amélioration du positionnement et du centrage du guide sur mobile */
/* NOUVEAU: Media query pour les très petits écrans (ex: iPhone SE) */
@media (max-width: 380px) {
    #music-title-details-section .music-details-container {
        gap: 15px;
        /* Réduit l'espace entre la pochette et les infos */
    }

    #details-album-art {
        max-width: 250px;
        /* Réduit la taille maximale de la pochette */
    }

    .music-info-panel h2 {
        font-size: 1.5em;
        /* Réduit la taille du titre principal */
    }

    .music-info-panel h3 {
        font-size: 1.1em;
        /* Réduit la taille des sous-titres (Inspirations, Tags...) */
    }
}

/* CORRECTION: Amélioration du positionnement et du centrage du guide sur mobile */
#tutorial-box {
    width: 90%;
    left: 50%;
    transform: translateX(-50%);
}

#tutorial-box #tutorial-text {
    font-size: 0.9em;
}

#tutorial-box.pos-top {
    top: 70px;
    bottom: auto;
}

#tutorial-box.pos-bottom {
    bottom: 80px;
    top: auto;
}

#tutorial-box.pos-center {
    top: 50%;
    transform: translate(-50%, -50%);
}

/* NOUVEAU: Supprime le fond grisé des overlays qui s'affichent en panneau sur mobile */
#settings-overlay,
#notifications-overlay,
#shop-overlay,
#achievements-overlay,
#tags-filter-overlay,
#playlist-overlay,
#guide-selection-overlay,
#player-options-overlay,
#reco-playlist-options-overlay,
#queue-overlay {
    background-color: transparent;
}

/* NOUVEAU: Style unifié pour les overlays en panneau inférieur sur mobile */
#settings-overlay .settings-card,
#notifications-overlay .settings-card,
#shop-overlay .settings-card,
#achievements-overlay .settings-card,
#tags-filter-overlay .settings-card,
#playlist-overlay .settings-card,
#guide-selection-overlay .settings-card,
#player-options-overlay .settings-card,
#reco-playlist-options-overlay .settings-card,
#queue-overlay .settings-card,
.mobile-card-menu-overlay .settings-card {
    position: fixed;
    /* CORRECTION: La couleur de fond est gérée par les variables de thème, on ne la force plus en transparent ici. */
    backdrop-filter: none;
    bottom: 0;
    /* Le panneau est toujours en bas */
    left: 0;
    right: 0;
    width: 100%;
    max-width: 100%;
    border-radius: 24px 24px 0 0;
    /* CORRECTION: Rayon un peu plus grand pour un look plus doux */
    margin: 0;
    transform: translateY(100%);
    transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    /* Animation plus fluide */
}

/* NOUVEAU: Amélioration de la typographie et de l'espacement dans les panneaux mobiles */
.settings-card h2 {
    font-size: 1.1em;
    /* CORRECTION: Titre encore un peu plus petit pour l'harmonie */
    font-weight: 600;
    text-align: center;
    padding-bottom: 15px;
    /* Espace sous le titre */
    margin-top: 10px;
    /* Espace au-dessus du titre (après la poignée) */
}

.settings-card .setting-item,
.settings-card .playlist-item,
.settings-card .queue-item,
.settings-card .tag-filter-item label {
    font-size: 0.95rem;
    padding: 5px 10px;
    /* CORRECTION: Espacement vertical réduit pour un panneau plus compact */
}

/* CORRECTION: Assure un bon alignement vertical pour les labels avec icône */
.settings-card .setting-label-group {
    display: flex;
    align-items: center;
    gap: 10px;
}

.settings-card .playlist-item-info .playlist-item-title,
.settings-card .queue-item .playlist-item-title {
    font-size: 0.95rem;
    /* CORRECTION: Taille de police légèrement réduite */
}

.settings-card .playlist-item-info .playlist-item-subtitle,
.settings-card .queue-item .playlist-item-subtitle {
    font-size: 0.8rem;
    /* Sous-titre un peu plus petit */
}

/* Styles pour la barre de navigation mobile */
.mobile-bottom-nav {
    display: flex !important;
    position: fixed !important;
    /* CORRECTION: Fixed pour rester en bas de l'écran */
    bottom: 0;
    left: 0;
    right: 0;
    width: 100% !important;
    background: #ffffff;
    border-radius: 0;
    /* Barre de nav plus fine */
    justify-content: space-around;
    box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.05);
    border-top: 1px solid rgba(0, 0, 0, 0.05);
    z-index: 1000 !important;
    /* CORRECTION: Z-index réduit pour passer sous les panneaux (1200+) */
}

.mobile-nav-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    color: #94a3b8;
    text-decoration: none;
    font-size: 0.65rem;
    font-weight: 600;
    flex: 1;
}

.mobile-nav-link span {
    display: block;
}

/* NOUVEAU: Style pour les icônes SVG de la barre de navigation mobile */
.mobile-nav-link svg {
    width: 24px;
    height: 24px;
    stroke-width: 2.5;
    transition: all 0.2s;
}

.mobile-nav-link.active,
.mobile-nav-link.player-active {
    color: #0f172a;
}

.mobile-nav-link.active svg {
    color: #3b82f6;
    transform: translateY(-2px);
}

/* NOUVEAU: Styles pour le mini-lecteur mobile */
.mobile-mini-player {
    position: fixed;
    bottom: var(--mobile-nav-height);
    /* Se place juste au-dessus de la barre de navigation */
    left: 0;
    /* CORRECTION: Prend toute la largeur */
    right: 0;
    /* CORRECTION: Fond légèrement gris pour le distinguer */
    background-color: var(--ui-bar-bg);
    /* CORRECTION: Fond légèrement gris pour le distinguer */
    border-top: none;
    /* CORRECTION: Suppression du trait de séparation */
    /* CORRECTION: Ajout d'une bordure de séparation */
    border-radius: 0;
    /* CORRECTION: Plus de bords arrondis */
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
    /* CORRECTION: Ombre plus subtile, comme la barre de nav */
    z-index: 1001;
    /* Doit être au-dessus de la barre de navigation (1000) */
    overflow: hidden;
    transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    transform: translateY(100%);
    /* Départ de plus bas pour l'animation */
    opacity: 0;
}

/* NOUVEAU: Masque le mini-lecteur tant que le contenu principal est caché (pendant l'intro) */
#main-content-wrapper.hidden~.mobile-mini-player {
    display: none !important;
}

.mobile-mini-player:not(.hidden) {
    transform: translateY(0);
    opacity: 1;
}

.mini-player-progress {
    width: 100%;
    height: 3px;
    background-color: var(--icon-hover-bg);
}

.mini-player-progress-fill {
    width: 0%;
    height: 100%;
    background-color: var(--active-color);
    transition: width 0.2s linear;
}

.mini-player-content {
    display: flex;
    align-items: center;
    padding: 11px;
    gap: 10px;
}

.mini-player-content img {
    width: 45px;
    height: 45px;
    border-radius: 8px;
    object-fit: cover;
}

.mini-player-info {
    flex-grow: 1;
    overflow: hidden;
    /* NOUVEAU: Passage en flex pour gérer le titre et le contexte */
    display: flex;
    flex-direction: column;
    justify-content: center;
    white-space: nowrap;
}

.mini-player-info h4 {
    margin: 0;
    font-size: 0.9em;
    /* Taille de police réduite */
    font-weight: 700;
    /* Styles pour le défilement */
    white-space: nowrap;
    overflow: hidden;
    width: 100%;
}

.mini-player-context-text {
    font-size: 0.6em;
    color: var(--text-color);
    opacity: 0.7;
    margin: 1px 0 0 0;
    width: 100%;
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* NOUVEAU: Centre le texte quand il n'y a pas de titre */
.mini-player-info.no-track {
    text-align: center;
    transform: translateX(-30px);
}

.mini-player-info h4>span {
    display: inline-block;
    animation: inherit;
    /* CORRECTION: Assure que l'animation de défilement est appliquée */
}

.mini-player-controls {
    display: flex;
    align-items: center;
    gap: 20px;
    font-size: 1.2rem;
    padding-right: 5px;
    transition: opacity 0.2s;
}

/* NOUVEAU: Couleur rouge pour le coeur "liké" dans le mini-lecteur */
.mini-player-controls i.active {
    color: #e91e63;
}

/* CORRECTION: Règle manquante pour masquer le mini-lecteur lorsqu'il est fermé ou caché par swipe. */
body.mobile-player-hidden .mobile-mini-player {
    transform: translateY(100%) !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* === NOUVEAU: MODE BULLE POUR LE MINI-LECTEUR === */
.mobile-mini-player.bubble-mode {
    /* Transformation en bulle */
    width: 85px;
    /* Un peu plus large pour la forme gélule */
    height: 55px;
    /* Un peu moins haut */
    border-radius: 999px;
    /* Crée la forme de gélule parfaite */
    padding: 0;
    bottom: calc(var(--mobile-nav-height) + 20px);
    /* Se positionne 20px au-dessus de la barre de nav */
    /* Position initiale */
    right: 20px;
    left: auto;
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    transition: width 0.3s ease, height 0.3s ease, border-radius 0.3s ease, left 0.3s ease, right 0.3s ease;
    overflow: visible;
    /* Permet aux icônes de déborder légèrement */
}

/* NOUVEAU: Poignée visuelle pour inciter au glissement */
.mobile-mini-player.bubble-mode::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 8px;
    /* Positionnée à gauche */
    transform: translateY(-50%);
    width: 4px;
    height: 20px;
    background-color: rgba(255, 255, 255, 0.4);
    border-radius: 2px;
}

.mobile-mini-player.bubble-mode .mini-player-progress,
.mobile-mini-player.bubble-mode .mini-player-info,
.mobile-mini-player.bubble-mode #mini-player-close-btn {
    display: none;
    /* On cache tout sauf la pochette et les contrôles principaux */
}

.mobile-mini-player.bubble-mode .mini-player-content {
    padding: 0;
    height: 100%;
    width: 100%;
}

.mobile-mini-player.bubble-mode .mini-player-content img {
    width: 100%;
    height: 100%;
    border-radius: inherit;
    /* Hérite de la forme gélule */
    bottom: 0;
    /* Annule le décalage */
    /* NOUVEAU: Empêche le menu contextuel "Enregistrer l'image" sur appui long */
    -webkit-touch-callout: none;
    /* iOS Safari */
    -webkit-user-select: none;
    /* Safari */
    user-select: none;
    /* Standard */
    pointer-events: none;
    /* Empêche l'image d'être la cible du clic */
}

.mobile-mini-player.bubble-mode .mini-player-controls {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(0, 0, 0, 0.3);
    /* CORRECTION: Fond de la bulle rendu plus transparent. */
    border-radius: 50%;
    width: 100%;
    height: 100%;
    justify-content: center;
    gap: 0;
    /* CORRECTION: Le conteneur est maintenant toujours visible mais non cliquable. */
    opacity: 1;
    pointer-events: none;
    transition: opacity 0.3s;
}

/* CORRECTION: Le bouton play/pause est maintenant parfaitement centré. */
.mobile-mini-player.bubble-mode #mini-player-play-pause-btn {
    /* CORRECTION: On le sort du conteneur transparent et on le centre. */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto;
    /* CORRECTION: Seul le bouton play/pause redevient cliquable. */
}

.mobile-mini-player.bubble-mode .mini-player-controls i {
    color: white;
    font-size: 1.2rem;
}

/* NOUVEAU: Cache le bouton like en mode bulle, il n'y a que play/pause */
.mobile-mini-player.bubble-mode #mini-player-like-btn,
.mobile-mini-player.bubble-mode #mini-player-close-btn {
    display: none;
}

/* NOUVEAU: Styles pour le lecteur plein écran mobile */
.mobile-full-player {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--ui-bar-bg);
    z-index: 1100;

    /* Flexbox pour la disposition verticale */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    /* Répartit l'espace : Haut, Milieu, Bas */
    align-items: center;

    /* Marges internes (Haut | Côtés | Bas) */
    padding: 70px 25px 40px;
    box-sizing: border-box;

    transform: translateY(100%);
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.mobile-full-player.active {
    transform: translateY(0);
}

/* Partie Haute : Pochette et Infos */
.mobile-player-top-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    /* Espace entre la pochette et le texte */
}

.mobile-player-art-wrapper {
    width: 100%;
    display: flex;
    justify-content: center;
}

.mobile-player-art {
    width: 70vw;
    max-width: 250px;
    max-height: 42vh;
    /* Limite la hauteur pour les écrans courts */
    aspect-ratio: 1;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    object-fit: cover;
}

.mobile-player-song-info {
    margin-top: 20px;
    text-align: center;
}

.mobile-player-secondary-controls {
    display: flex;
    width: 100%;
    gap: 35px;
    justify-content: center;
    align-items: center;
    font-size: 1.1rem;
    color: var(--text-color);
    flex-shrink: 0;
    margin-top: 25px;
}

/* Partie Centrale : Contrôles Principaux */
.mobile-player-main-controls-wrapper {
    display: flex;
    flex-direction: column;
    gap: 20px;
    /* Espace entre la barre de progression et les boutons */
    justify-content: center;
    width: 100%;
}

.mobile-player-progress {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0 10px;
    flex-shrink: 0;
}

.mobile-player-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 35px;
    /* Espacement entre les boutons */
    width: 100%;
    font-size: 1.4rem;
    flex-shrink: 0;
}


/* NOUVEAU: Ajustements pour les overlays sur mobile */
.settings-card {
    padding: 20px 15px;
    /* Padding horizontal réduit */
    max-height: 95vh;
    /* Hauteur maximale légèrement plus grande */
}

.settings-card h2 {
    font-size: 1.3em;
    /* Titre légèrement plus petit */
    margin-bottom: 10px;
    padding-bottom: 10px;
}

/* NOUVEAU: Style pour la poignée de fermeture du lecteur mobile */
.mobile-player-handle {
    position: absolute;
    top: 8px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 5px;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 2.5px;
}

/* CORRECTION: Restauration du header pour éviter l'espace vide anormal */
.mobile-player-header {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
    box-sizing: border-box;
    padding: 20px;
    z-index: 10;
}

/* NOUVEAU: Ajoute une transition pour la fermeture par swipe */
.mobile-full-player:not(.active) {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.mobile-player-art {
    width: 70vw;
    max-width: 300px;
    aspect-ratio: 1 / 1;
    object-fit: cover;
    /* CORRECTION: 'cover' est souvent plus esthétique pour les pochettes carrées */
    border-radius: 15px;
    max-height: 40vh;
    /* Limite la hauteur sur les petits écrans */
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

.mobile-player-song-info {
    /* margin-top est maintenant géré par le 'gap' du parent .mobile-player-top-content */
    text-align: center;
}

.mobile-player-song-info h3 {
    font-size: 1.5em;
    font-weight: 700;
    margin: 0 0 5px 0;
    white-space: nowrap;
    overflow: hidden;
    width: 100%;
}

.mobile-player-song-info p {
    font-size: 1em;
    color: var(--text-color);
    opacity: 0.8;
    margin: 0;
    white-space: nowrap;
    /* CORRECTION: Empêche le retour à la ligne */
    overflow: hidden;
    width: 100%;
}

.mobile-player-song-info h3>span,
.mobile-player-song-info p>span {
    display: inline-block;
}

/* MODIFICATION: Le défilement est actif par défaut */
.mini-player-info .scrolling>span,
.mobile-player-song-info .scrolling>span {
    animation: scroll-title var(--scroll-duration, 5s) linear infinite;

}

.mobile-player-secondary-controls {
    display: flex;
    width: 100%;
    justify-content: center;
    gap: 30px;
    padding: 0;
    align-items: center;
    font-size: 1.4rem;
    /* Réduit pour plus de finesse */
    color: var(--text-color);
    margin-top: 0;
    /* Géré par le gap du parent */
    flex-shrink: 0;
}

.mobile-player-secondary-controls i.active {
    color: #e91e63 !important;
    /* Coeur rouge */
}

.mobile-player-secondary-controls i.added {
    color: var(--active-color) !important;
    /* Tick bleu */
}

.mobile-player-main-controls-wrapper {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 30px;
    padding: 0 20px;
}

.mobile-player-progress {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* CORRECTION: Styles pour la barre de progression, similaires à la version ordinateur */
.mobile-player-progress .progress-bar {
    flex-grow: 1;
    height: 6px;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 3px;
}

/* CORRECTION: Ajout de la couleur pour la barre de progression */
.mobile-player-progress .progress-fill {
    height: 100%;
    background-color: var(--active-color);
    border-radius: 3px;
}

.mobile-player-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10vw;
    /* Espacement réactif basé sur la largeur de l'écran */
    width: 100%;
    font-size: 1.6rem;
    /* CORRECTION: Taille des icônes précédent/suivant légèrement réduite */
}

/* RÉDUIT: Taille des icônes shuffle et loop */
#mobile-player-shuffle-btn,
#mobile-player-loop-btn {
    font-size: 1.1rem;
}

/* CORRECTION: Harmonisation du style du bouton Play */
.mobile-player-play-box {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: transparent;
    /* CORRECTION: Pas de fond pour un style minimaliste */
    border-radius: 50%;
    width: 70px;
    height: 70px;
    transition: background-color 0.2s ease;
    box-shadow: none;
    /* CORRECTION: Pas d'ombre */
}

.mobile-player-play-box i {
    font-size: 1.8rem;
    color: var(--text-color);
    /* CORRECTION: L'icône a la couleur du texte */
}

/* On réutilise les styles du lecteur de bureau pour la cohérence */
#mobile-player-volume-control.volume-control-new {
    padding: 8px 12px;
    /* Padding un peu plus grand pour le mobile */
}

/* NOUVEAU: Styles pour les tablettes en mode portrait */
@media (min-width: 600px) and (max-width: 952px) and (orientation: portrait) {
    .mobile-player-art {
        max-width: 450px;
        /* Pochette plus grande */
    }

    .mobile-player-song-info h3 {
        font-size: 2em;
        /* Titre plus grand */
    }

    .mobile-player-song-info p {
        font-size: 1.2em;
        /* Artiste plus grand */
    }

    .mobile-player-controls {
        gap: 30px;
        /* Espace plus grand entre les contrôles */
    }
}

/* Partie Basse : Actions */
.mobile-player-bottom-actions {
    width: 100%;
    display: flex;
    justify-content: space-between;
    /* Écarte les éléments aux extrémités */
    align-items: center;
    padding: 0 10px;
    background: transparent;
    /* Plus léger visuellement */
    border-radius: 0;
    margin-bottom: 0;
    flex-shrink: 0;
    margin-top: 0;
}

.mobile-player-bottom-actions i,
.mobile-player-secondary-controls i {
    transition: transform 0.1s ease, color 0.2s ease;
}

.mobile-player-bottom-actions i:active,
.mobile-player-secondary-controls i:active {
    transform: scale(0.8);
    opacity: 0.7;
}

/* NOUVEAU: Styles pour le panneau de la file d'attente mobile */
.mobile-queue-panel-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1150;
    opacity: 0;
    transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.mobile-queue-panel {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 85vh;
    background-color: var(--ui-bar-bg);
    z-index: 1200;
    border-radius: 20px 20px 0 0;
    box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.15);
    display: flex;
    flex-direction: column;
    transform: translateY(100%);
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.mobile-queue-handle-wrapper {
    width: 100%;
    height: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
}

.mobile-queue-handle {
    width: 40px;
    height: 5px;
    background-color: rgba(0, 0, 0, 0.1);
    border-radius: 3px;
}

.mobile-queue-header {
    padding: 0 20px 10px 20px;
    flex-shrink: 0;
    text-align: center;
    /* CENTRER LE TEXTE */
}

.mobile-queue-header h2 {
    margin: 0;
    font-size: 1.4rem;
    font-weight: 800;
    color: var(--text-color);
}

.mobile-queue-context {
    padding: 0 20px 15px 20px;
    border-bottom: 1px solid var(--ui-bar-border);
    flex-shrink: 0;
    text-align: center;
}

.mobile-queue-context p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--text-color);
    opacity: 0.7;
}

.mobile-queue-list {
    flex-grow: 1;
    overflow-y: auto;
    padding-bottom: env(safe-area-inset-bottom, 20px);
}

/* RÉSOUDRE: Styling manquant de la queue sur mobile */
.mobile-queue-list .playlist-item-wrapper {
    position: relative;
    overflow: hidden;
    border-bottom: 1px solid var(--ui-bar-border);
    /* Ajout d'une séparation claire */
}

.mobile-queue-list .playlist-item-content {
    position: relative;
    z-index: 2;
    background-color: var(--ui-bar-bg);
    padding: 12px 20px;
    /* Plus d'espace vertical */
    transition: transform 0.3s ease-out;
}

.mobile-queue-list .playlist-item {
    display: flex;
    align-items: center;
    gap: 15px;
    background: transparent;
    border: none;
    padding: 0;
}

.mobile-queue-list .playlist-item.currently-playing {
    background-color: rgba(29, 78, 216, 0.1);
    /* Bleu très léger pour le titre actif */
    border-radius: 8px;
    padding: 10px;
    margin: -5px;
}

.mobile-queue-drag-handle {
    color: #aaa;
    cursor: grab;
    font-size: 0.9rem;
    padding: 5px;
}

.mobile-queue-drag-handle-placeholder {
    width: 30px;
    /* Même largeur que la poignée */
    flex-shrink: 0;
}

.mobile-queue-list .playlist-item img {
    width: 45px;
    height: 45px;
    border-radius: 6px;
    object-fit: cover;
}

.mobile-queue-list .playlist-item-info {
    flex-grow: 1;
    overflow: hidden;
}

.mobile-queue-list .playlist-item-title {
    margin: 0;
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.mobile-queue-list .playlist-item-subtitle {
    margin: 2px 0 0 0;
    font-size: 0.75rem;
    color: var(--text-color);
    opacity: 0.6;
}

.mobile-queue-list .currently-playing-indicator {
    color: var(--active-color);
    font-size: 0.8rem;
    margin-left: 10px;
}

.mobile-queue-list .playlist-item.currently-playing .playlist-item-title {
    color: var(--active-color);
}

.mobile-queue-list .playlist-item-delete-action {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 60px;
    background-color: transparent;
    color: #ef4444;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    z-index: 1;
}


/* NOUVEAU: Ajustements pour les écrans mobiles très courts (ex: iPhone SE) */
@media (max-height: 680px) {
    .mobile-full-player {
        padding-top: 50px;
        /* Moins d'espace en haut */
        padding-bottom: 25px;
        /* Moins d'espace en bas */
    }

    .mobile-player-art {
        /* Réduit la taille de la pochette */
        width: 65vw;
        max-width: 250px;
    }

    .mobile-player-main-controls-wrapper {
        gap: 10px;
    }

    .mobile-player-secondary-controls {
        margin-top: 15px;
        font-size: 1.3rem;
        /* Réduit la taille des icônes like/+ */
    }

    .mobile-player-controls {
        gap: 8vw;
        /* Réduit l'espacement entre les boutons de lecture */
        font-size: 1.4rem;
        /* Réduit la taille des icônes prev/next */
    }

    .mobile-player-play-box {
        width: 60px;
        height: 60px;
    }

    .mobile-player-play-box i {
        font-size: 1.5rem;
    }
}

/* NOUVEAU: Ajustements pour les écrans très hauts (tablettes en portrait) */
@media (min-height: 900px) {
    .mobile-full-player {
        padding-top: 12vh;
        /* Plus d'espace en haut */
        padding-bottom: 8vh;
        /* Plus d'espace en bas */
    }

    .mobile-player-main-controls-wrapper {
        margin-top: 5vh;
        /* Pousse les contrôles vers le bas */
    }
}

/* NOUVEAU: Ajout d'un padding horizontal pour aérer le contenu et éviter qu'il ne touche les bords */
#videos-cards,
#bonus-cards {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
    padding-bottom: 15px;
}

#titles-cards {
    padding-bottom: 15px;
}

/* CORRECTION: Ajustement de la taille des messages d'action (Toast) */
#custom-dialog {
    font-size: 0.8em;
    padding: 10px 20px;
    bottom: 80px;
    /* Remonte un peu pour ne pas être caché par la nav */
    max-width: 85%;
}

/* CORRECTION: Ajustement de la section Code Secret */
.cheat-code-section {
    /* Fusion: on retire le style individuel */
    height: 100%;
    background-color: transparent;
    border: none;
    padding: 0 6px 0 10px;
    /* Padding ajusté pour la fusion */
    display: flex;
    align-items: center;
    justify-content: space-between;

    flex: 1;
    /* Prend 50% de l'espace */
    max-width: none;
    /* Retire la limite */
    margin: 0;
    /* Retire les marges auto */
}

#cheat-code-input {
    height: 100%;
    background: transparent;
    font-weight: 600;
    font-size: 0.9em;
    padding: 0;
}

/* Bouton Activer en rond */
#cheat-code-btn {
    width: 32px;
    height: 32px;
    min-width: 32px;
    border-radius: 50%;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

#cheat-code-btn i {
    font-size: 0.9em;
}

/* === RESTAURATION: Styles du menu contextuel mobile === */
.mobile-card-menu-header {
    display: flex;
    align-items: center;
    gap: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--ui-bar-border);
    margin-bottom: 15px;
    padding-right: 30px;
    /* Espace pour le bouton fermer */
}

.mobile-card-menu-img {
    width: 50px;
    height: 50px;
    border-radius: 8px;
    object-fit: cover;
}

.mobile-card-menu-info h3 {
    font-size: 1em;
    margin: 0;
    font-weight: 700;
    color: var(--text-color);
}

.mobile-card-menu-info p {
    font-size: 0.8em;
    margin: 2px 0 0 0;
    opacity: 0.7;
    color: var(--text-color);
}

.mobile-card-menu-items {
    display: flex;
    justify-content: space-around;
    gap: 10px;
}

.mobile-card-menu-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    background: none;
    border: none;
    color: var(--text-color);
    font-size: 0.6em;
    /* Texte plus petit */
    font-weight: 600;
    padding: 5px;
    /* Padding réduit */
    border-radius: 10px;
    flex: 1;
}

.mobile-card-menu-item:active {
    background-color: var(--icon-hover-bg);
}

.mobile-card-menu-item i {
    font-size: 1.2em;
    /* Icône plus petite */
    margin-bottom: 3px;
    color: var(--icon-color);
}

.mobile-card-menu-item i.active {
    color: #e91e63;
}

.mobile-card-menu-item i.added {
    color: var(--active-color);
}

/* Cache la barre si le clavier est ouvert sur certains navigateurs */
@media (max-height: 400px) {
    #mobile-bottom-nav {
        display: none !important;
    }
}

/* NOUVEAU: Fix pour le thème DS sur Samsung Internet (hauteur viewport) */
body.ds-active #ds-console-wrapper {
    height: 100vh;
    /* Fallback */
    height: 100dvh !important;
    /* Hauteur dynamique réelle qui prend en compte les barres du navigateur */
    min-height: -webkit-fill-available;
    /* Fallback iOS */
}

body.ds-active .ds-hinge {
    flex-shrink: 0 !important;
    /* Empêche la charnière d'être écrasée si l'espace manque */
}

/* === ÉLÉMENTS MASQUÉS SUR MOBILE === */
.sidebar,
.top-bar-right,
#mobile-wifi-btn,
.central-profiles-card,
.bottom-ui-container,
#player-toggle-handle,
.about-switch-btn {
    display: none !important;
}


/* --- CORRECTION PLAYLISTS (Style Liste) --- */
.reco-card {
    display: flex;
    flex-direction: column;
    /* Card layout */
    gap: 10px;
    padding: 12px;
    background: var(--card-style-bg);
    border-radius: var(--radius-m);
    /* Rounded card */
    box-shadow: var(--card-style-shadow);
    border: 1px solid var(--card-border);
    height: auto;
    position: relative;
}

.reco-card:last-child {
    border-bottom: 1px solid var(--card-border);
}

.reco-image-wrapper {
    width: 100%;
    aspect-ratio: 1/1;
    flex-shrink: 0;
    height: auto;
}

.reco-image-container {
    width: 100%;
    height: 100%;
    border-radius: 16px;
    /* Rounded image */
    position: relative;
    z-index: 1;
    overflow: hidden;
}

.reco-img-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    color: white;
}

.reco-info {
    flex: 1;
    width: 100%;
    padding-right: 30px;
    /* Space for button */
}

.reco-title {
    font-size: 0.9rem;
    margin-bottom: 2px;
    color: var(--text-color);
    font-weight: 800;
}

.reco-subtitle {
    font-size: 0.7rem;
    color: var(--text-muted);
}

/* === PROTOTYPE STYLES INTEGRATION === */

/* Style de base des blocs UI */
.ui-block {
    background: var(--ui-bg, #ffffff);
    border-radius: 24px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
    width: 100%;
    border: 1px solid rgba(0, 0, 0, 0.03);
    margin-bottom: 15px;
}

/* NOUVEAU: Unification du style du conteneur de guide sur le dashboard */
#dashboard-guide-buttons {
    background: var(--card-style-bg);
    border-radius: var(--radius-l);
    box-shadow: var(--card-style-shadow);
    border: 1px solid var(--card-border);
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* NOUVEAU: Ajustement des boutons à l'intérieur du nouveau conteneur */
#dashboard-guide-buttons .guide-choice-btn {
    background-color: transparent;
    border-radius: var(--radius-m);
    /* 16px */
    box-shadow: none;
}

body.dark-theme .ui-block {
    background: var(--card-bg, #1e1e1e);
    border-color: var(--card-border, #333);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

body.dark-theme #dashboard-guide-buttons .guide-choice-btn {
    background-color: var(--search-bar-bg);
    border-color: var(--ui-bar-border);
}

/* --- STYLES SPÉCIFIQUES ACCORDÉON --- */
.hero-accordion {
    display: flex;
    flex-direction: row;
    height: 180px;
    gap: 0;
    padding: 0;
    margin-bottom: 8px;
    border-radius: 24px;
    overflow: hidden;
}

.accordion-panel {
    position: relative;
    flex: 1;
    transition: flex 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    overflow: hidden;
    cursor: pointer;
    min-width: 0;
    border-radius: 0;
    background: #eee;
    border-right: 3px solid white;
}

body.dark-theme .accordion-panel {
    background: #333;
    border-right-color: var(--bg-color, #121212);
}

.accordion-panel:last-child {
    border-right: none;
}

.accordion-panel.active {
    flex: 4;
    cursor: default;
}

.panel-bg {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    transition: transform 0.6s ease;
    opacity: 0.8;
}

.accordion-panel.active .panel-bg {
    opacity: 1;
}

.accordion-panel:hover .panel-bg {
    transform: scale(1.05);
}

.panel-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    /* Sombre par défaut (fermé) */
    transition: background 0.5s;
}

.accordion-panel.active .panel-overlay {
    background: linear-gradient(to top, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.2), transparent);
    /* Dégradé (ouvert) */
}

/* Contenu détaillé (visible uniquement si actif) */
.panel-content {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 15px;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.4s 0.1s;
    /* Délai pour l'apparition */
    pointer-events: none;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.accordion-panel.active .panel-content {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

/* Label de la bande (visible uniquement si inactif) */
.panel-collapsed-label {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    text-align: center;
    color: white;
    font-family: 'Inter', sans-serif;
    font-weight: 900;
    text-transform: uppercase;
    font-size: 0.6rem;
    /* Plus petit pour tenir en largeur */
    letter-spacing: 0.1em;
    opacity: 1;
    transition: opacity 0.3s;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
    pointer-events: none;
    display: flex;
    flex-direction: column;
    /* Empilé verticalement */
    align-items: center;
    gap: 5px;
}

.accordion-panel.active .panel-collapsed-label {
    opacity: 0;
}

/* Indicateurs (Dots) */
.accordion-dots {
    position: absolute;
    bottom: 20px;
    right: 20px;
    display: flex;
    gap: 6px;
    z-index: 20;
    pointer-events: none;
}

.accordion-dot {
    width: 6px;
    height: 6px;
    background: rgba(255, 255, 255, 0.4);
    border-radius: 50%;
    transition: all 0.3s;
}

.accordion-dot.active {
    width: 18px;
    background: white;
    border-radius: 3px;
}

/* --- PLAYLISTS LIST STYLE --- */
#playlist-reco-list {
    display: flex;
    flex-direction: column;
    gap: 0;
    padding: 0 5px;
}

.reco-card {
    display: flex;
    flex-direction: row;
    /* Horizontal */
    align-items: center;
    gap: 12px;
    padding: 12px 0;
    background: transparent;
    border-radius: 0;
    box-shadow: none;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

body.dark-theme .reco-card {
    border-bottom-color: rgba(255, 255, 255, 0.05);
}

.reco-card:last-child {
    border-bottom: none;
}

/* Wrapper pour l'effet "Pile" (Playlist) */
.reco-image-wrapper {
    position: relative;
    width: 44px;
    height: 44px;
    flex-shrink: 0;
}

.reco-image-container {
    width: 100%;
    height: 100%;
    border-radius: 10px;
    position: relative;
    z-index: 1;
    overflow: hidden;
}

.reco-img-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    color: white;
}

/* Couleurs placeholders */
.reco-playlist-chill {
    background: linear-gradient(135deg, #a5f3fc, #3b82f6);
}

.reco-playlist-frutiger {
    background: linear-gradient(135deg, #86efac, #10b981);
}

.reco-info {
    flex: 1;
}

/* .reco-title est deja defini plus haut, on ajoute juste ce qu'il faut si besoin, ou on laisse */

/* Bouton Ajouter (+) à droite */
.reco-add-btn {
    /* Style épuré sans le rond */
    width: auto;
    height: auto;
    border-radius: 0;
    background: transparent;
    border: none;
    color: var(--icon-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    cursor: pointer;
    padding: 5px;
    box-shadow: none;
    position: absolute;
    bottom: 15px;
    right: 15px;
    margin: 0;
}

body.dark-theme .reco-add-btn {
    background: var(--ui-bar-bg);
    border-color: var(--card-border);
}

.reco-add-btn:active {
    background: #f1f5f9;
    color: #3b82f6;
    border-color: #3b82f6;
}

/* --- STYLE BONUS SIMPLE (Clean Widget) --- */
.daily-bonus-widget {
    padding: 22px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #ffffff;
    position: relative;
    overflow: hidden;
    min-height: 80px;
}

body.dark-theme .daily-bonus-widget {
    background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
}

/* Décoration de fond (Grande taille, peu d'opacité) */
.daily-bonus-widget::before {
    content: '\f091';
    /* Trophée FontAwesome */
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    position: absolute;
    right: 60px;
    bottom: -15px;
    top: auto;
    font-size: 5rem;
    color: #cbd5e1;
    opacity: 0.15;
    transform: rotate(-15deg);
    pointer-events: none;
    z-index: 0;
}

body.dark-theme .daily-bonus-widget::before {
    color: #ffffff;
    opacity: 0.03;
}

.daily-bonus-widget::after {
    content: 'BONUS';
    font-family: 'Inter', sans-serif;
    font-weight: 900;
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.7rem;
    color: #94a3b8;
    opacity: 0.25;
    pointer-events: none;
    z-index: 0;
    letter-spacing: 0.1em;
}

body.dark-theme .daily-bonus-widget::after {
    color: white;
    opacity: 0.1;
}

/* .bonus-content, .bonus-info deja definis? non */
.bonus-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
    position: relative;
    z-index: 1;
    flex: 1;
    align-items: center;
    padding-left: 40px;
    /* Balance pour centrer (compense le bouton à droite) */
    padding-right: 0;
}

.bonus-info {
    font-size: 0.9rem;
    font-weight: 800;
    color: #64748b;
    /* Gris clair/moyen */
    display: flex;
    align-items: center;
    gap: 6px;
}

body.dark-theme .bonus-info {
    color: #e0f2fe;
}

.bonus-btn {
    background: #ffffff;
    color: #0ea5e9;
    /* Bleu vif */
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    /* Rond pour l'icône */
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    box-shadow: 0 4px 10px rgba(14, 165, 233, 0.2);
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    z-index: 1;
}

body.dark-theme .bonus-btn {
    background: #0ea5e9;
    color: white;
}

.bonus-btn:active {
    background: #f0f9ff;
    transform: scale(0.96);
}

/* === CORRECTIONS & AJOUTS POST-INTEGRATION === */

/* 1. Styles manquants pour le contenu de l'accordéon (News/Hero) */
.hero-title {
    font-size: 1.1rem !important;
    /* Force la taille */
    color: white;
    text-transform: uppercase;
    font-weight: 900;
    /* Inter Black */
    margin-bottom: 8px;
    line-height: 1.1;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    display: block;
}

.hero-button {
    background: white;
    color: black;
    border: none;
    padding: 8px 16px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 0.75rem;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    transition: transform 0.1s;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.hero-button:active {
    transform: scale(0.95);
}

.panel-content {
    /* Assure que le contenu est bien au-dessus de l'overlay */
    z-index: 10;
}

/* 2. Correction de la Navigation Mobile (Barre du bas) */
/* "la barre du bas elle est plus au dessus comme c'était le cas avant (elle a priorité)" */
.mobile-bottom-nav {
    z-index: 900 !important;
    /* Priorité absolue sur tout */
    padding-bottom: env(safe-area-inset-bottom, 15px) !important;
    height: calc(55px + env(safe-area-inset-bottom, 15px));
    /* Hauteur fixe ajustée */
    align-items: center;
    background: rgba(255, 255, 255, 0.95);
    /* Légèrement transparent pour effet premium */
    backdrop-filter: blur(10px);
}

body.dark-theme .mobile-bottom-nav {
    background: rgba(18, 18, 18, 0.95);
    border-top-color: rgba(255, 255, 255, 0.1);
}

/* "sans texte sous les icones !" */
.mobile-nav-link span {
    display: none !important;
}

.mobile-nav-link {
    justify-content: center;
    gap: 0;
    padding: 0;
}

.mobile-nav-link svg,
.mobile-nav-link i {
    font-size: 1.6rem;
    /* Icônes un peu plus grandes pour compenser l'absence de texte */
    margin-bottom: 0;
    transition: color 0.3s;
}

/* Couleurs inspirées de l'intro ! */
.mobile-nav-link[data-link="home-dashboard-section"] svg {
    color: #3b82f6;
}

/* Blue */
.mobile-nav-link[data-link="albums-section"] svg {
    color: #ef4444;
}

/* Red */
.mobile-nav-link[data-link="videos-section"] svg {
    color: #a855f7;
}

/* Purple */
.mobile-nav-link[data-link="shop-section"] svg {
    color: #10b981;
}

/* emerald/Green */
.mobile-nav-link[data-link="library-section"] svg {
    color: #f59e0b;
}

/* Yellow/Orange */

/* Quand inactif, on peut réduire un peu l'opacité si besoin, mais le user veut des couleurs */
.mobile-nav-link:not(.active) svg {
    opacity: 0.7;
}

.mobile-nav-link.active svg {
    opacity: 1;
    filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.1));
}

/* 3. Correction du Header Mobile (Barre du haut) */
.mobile-header-icons {
    display: flex !important;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px 8px 15px;
    /* Ajusté pour meilleur espacement vertical et horizontal */
    height: 50px;
    /* Réduction de la hauteur (60px -> 50px) */
    position: relative;
    z-index: 100;
}

/* Conteneur gauche (Notifications, etc) */
.mobile-header-left-icons {
    width: 80px;
    /* Un peu plus large pour éviter le squeeze */
    display: flex;
    justify-content: flex-start;
    align-items: center;
}

/* Conteneur droit (Recherche, Paramètres) */
.mobile-header-right-icons {
    width: 80px;
    /* Un peu plus large pour éviter le squeeze */
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 12px;
}

/* Conteneur central (Logo ou Titre) - Centrage Absolu */
#mobile-header-logo-container {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: auto;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;
    /* Laisse passer les clics si besoin */
}

#mobile-header-title {
    font-size: 1.15rem;
    /* Légèrement ajusté */
    font-weight: 800;
    text-transform: capitalize;
    /* "Home" au lieu de "HOME" */
    letter-spacing: 0;
    /* Espacement standard */
    text-align: center;
}

/* Styles des boutons du header */
.top-bar-btn {
    width: 38px;
    height: 38px;
    min-width: 38px;
    min-height: 38px;
    background: transparent !important;
    backdrop-filter: none;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: none !important;
    margin: 0 !important;
    color: var(--text-color) !important;
    flex-shrink: 0;
}

body.dark-theme .top-bar-btn {
    background: transparent !important;
    color: var(--text-color) !important;
    border: none;
}

/* Ajustement spécifique pour aligner les boutons à droite */
#mobile-notifications-btn,
#mobile-search-btn,
#mobile-settings-btn {
    position: relative;
    /* Nécessaire pour le point de notification */
}